一、 项目概述
本项目是一个专为神经语言学实验室设计的数字化科研与教学平台。 它采用 FastAPI （Python） 作为后端引擎，SQLite 作为数据库，前端使用 Jinja2 模板渲染。 平台支持视频课件在线学习、实验测试考核、成绩自动生成与存档以及管理员后台管理。

二、 核心技术规格
后端框架： FastAPI （异步高性能 Web 框架）。
服务器： Uvicorn （支持全网监听 ）。0.0.0.0
数据库： SQLite （轻量级关系型数据库）。
前端技术：HTML5， CSS3 （含有毛玻璃特效、写实粒子流星动画）、Vanilla JS（Fetch API）。
网络特性： 原生支持 HTTP Range Requests （206 Partial Content），确保内网穿透环境下的视频“边下边播”。
三、 文件夹结构与功能对应
/ （根目录）：
app.py: 程序入口。负责启动 Uvicorn、挂载静态文件、自动识别局域网 IP 并打印访问指南。
/modules （业务逻辑层）：
routes.py： 核心控制器。处理所有 URL 路由、用户鉴权、视频流传输引擎、测试评分逻辑。
database.py： 数据持久层。封装所有 SQL作，包括用户信息更新、视频进度存储、题库管理。
/templates（视图层）：
base.html: 基础母版。包含导航栏、流星背景逻辑（特定页面自动排除流星以免干扰）。
index.html: 欢迎页。
login.html / register.html: 身份验证页面。支持管理员序列号验证。
video_catalog.html / test_catalog.html： 二级入口页面。将实验分为“脑电实验”、“语言模型”等分类。
videos.html: 视频列表页。支持进度追踪 JS。
eeg_test.html: 实验测试页。 含交互式选项反馈。
profile.html: 个人中心。 查看课件进度、下载历史成绩单。
/static （静态资源）：
/css: (全局皮肤), (粒子流星动画)。global.cssmeteors.css
/videos: 存放上传的视频文件。
/Data（数据存储）：
存放系统生成的 成绩单和 提交锁定文件。.txt.lock
四、 核心运行逻辑说明
1. 导航与准入逻辑
用户登录时需选择“普通用户”或“管理员”。管理员需输入特定序列号（如 ）。123456
访问根目录 会自动重定向至 。//index
导航栏采用目录树结构：点击“视频课室” -> 进入 -> 选择具体实验 -> 进入 。video-catalogvideos
2. 高级视频流引擎 (边下边播)
为了解决移动端和内网穿透卡顿， 接口实现了 函数。/video-stream/{filename}send_video_range
原理： 响应 。后端按需（1MB 缓冲区）读取文件块，支持前端播放器随意拖动进度条而不必等待全量下载。206 Partial Content
3. 实验考核与存档逻辑
题目渲染： 从数据库动态加载题库。
实时同步： 用户点击选项时，前端 JS 通过 实时向 发送数据，防止断网丢失进度。fetch/submit-answer
交卷与锁定：
点击“完成测试”后，系统计算得分。
在 目录生成成绩报告，命名规范为：（序号根据已有文件数自动递增）。Data/账号-成绩单-序号.txt
同时生成一个 文件。一旦该文件存在，用户将无法再次进入测试界面修改答案。账号.lock
重置机制： 管理员点击“刷新机会”时，仅删除数据库记录和 文件，绝不删除已生成的 TXT 存档。.lock
4. UI/UX 特效逻辑
流星背景： 在 中通过 Jinja2 判断 。在 (考试) 和 (看课) 页面自动停用流星，以确保用户专注。base.htmlrequest.url.path/eeg-test/videos
访问指南： 启动时会通过 获取真实的局域网 IP。底部会显示当前访问的完整 URL，极大方便了手机端内网扫码访问。app.pysocketbase.html
给AI模型的提示词建议：

“你现在已经掌握了该项目的全量结构。在接下来的修改中，请严格遵守以下原则：

所有的视频传输必须保留 逻辑。206 Partial Content
成绩单命名必须严格遵循 格式。账号-成绩单-序号.txt
管理员重置逻辑不能删除 Data 文件夹下的 TXT 文件。
新增功能不得破坏原有的数据库字段和 Session 鉴权机制。”