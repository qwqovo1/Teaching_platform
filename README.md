# 深圳大学 - 神经语言学实验室教学平台

本项目是一个基于 **FastAPI** 开发的综合性教学管理平台，专门为 **深圳大学神经语言学实验室** 设计。平台集成了用户权限管理、个人信息定制以及视频教学资源分类展示等功能，并采用了现代化的“马卡龙”视觉设计风格。

## 🚀 项目特性

### 1. 视觉与交互体验 (UI/UX)
- **清新视觉风格**：采用明亮的马卡龙渐变背景（天空蓝、樱花粉、淡紫），营造舒适的学术研究氛围。
- **动态装饰元素**：全站集成 CSS 动画实现的悬浮粒子（小星星、花朵），增加页面的活力感。
- **黄金比例设计**：核心交互组件（输入框、分类按钮）严格遵循 **0.618 黄金比例**，视觉观感更协调。
- **毛玻璃效果 (Glassmorphism)**：容器采用半透明磨砂质感，结合顶部固定导航栏，提升界面层次感。

### 2. 核心功能
- **权限管理**：完整的用户注册、登录、修改密码及 Session 会话管理。
- **视频课室**：
  - **一级分类目录**：提供脑电（EEG）实验视频及其他待定科研分类。
  - **视频流播放**：支持 MP4/MOV/AVI/WebM 等多种科研常用视频格式。
  - **安全操作**：视频上传与删除均设有独立授权密码（默认：`123456`），防止误操作。
- **个人中心**：支持自定义昵称和头像上传，数据实时更新。
- **自动清理**：内置数据库过期记录清理机制，维护系统轻量运行。

## 🛠️ 技术栈

- **后端**: [FastAPI](https://fastapi.tiangolo.com/) (Python 3.9+)
- **前端**: HTML5, CSS3, [Jinja2 Templates](https://jinja.palletsprojects.com/)
- **数据库**: SQLite3
- **运行环境**: Uvicorn, Anaconda/Conda
- **主要依赖**: `python-multipart` (文件上传), `pydantic` (模型验证), `passlib` (密码哈希)

## 📂 目录结构

```text
Teaching_platform/
├─app.py                # 项目入口文件 (启动路由与静态挂载)
├─static/               # 静态资源
│  ├─css/               # 包含全局美化样式 global.css
│  ├─icons/             # 默认头像及图标 (default.png)
│  ├─uploads/           # 用户上传的个人头像
│  └─videos/            # 教学视频资源存储
├─templates/            # 网页模板 (base, index, login, videos 等)
├─modules/              # 核心业务逻辑
│  ├─database.py        # SQLite 数据库操作
│  ├─routes.py          # 路由逻辑处理
│  ├─utils.py           # 校验与清理工具
│  └─config.py          # 系统配置文件 (包含授权密码)
├─unity/                # (扩展) Unity 实验组件 Assets
└─webgl/                # (扩展) WebGL 实验发布内容
```

## 📦 安装与启动

### 1. 环境准备
确保已安装 Anaconda 并激活您的环境（基于您的配置）：
```bash
conda activate py39_fix
```

### 2. 安装依赖
```bash
pip install fastapi uvicorn jinja2 python-multipart pydantic
```

### 3. 运行项目
在项目根目录下执行：
```bash
python app.py
```

启动后，访问地址：
- **欢迎页**: `http://localhost:8000`
- **后台管理**: `http://localhost:8000/docs` (FastAPI Swagger UI)

## 🔐 关键配置说明

- **上传/删除授权密码**: `123456` (可在 `modules/config.py` 中修改)
- **数据库路径**: `users.db` (首次启动自动初始化)
- **静态资源挂载**: `/static` 映射至本地根目录的 `static` 文件夹。

## 📝 开发者说明
- **样式修改**: 如需调整背景或动画，请修改 `static/css/global.css`。
- **页面布局**: 全站基于 `base.html` 继承，导航栏固定在顶部，内容区域通过 `.main-content` 类控制内边距。

---
**© 2024 深圳大学神经语言学实验室 | 保留所有权利**
为了让AI大模型能够“秒懂”你的项目逻辑，我为你准备了一份极度精细的**项目解析指南**。它不仅涵盖了文件夹的功能，还深入到了每一个关键文件的具体页面职责、视觉风格和逻辑分工。

---

### 🧠 深圳大学 - 神经语言学实验室平台：全量代码文件解析

**项目技术栈**：FastAPI (后端) + Jinja2 (模板引擎) + SQLite (数据库) + Unity/WebGL (仿真)

#### 1. 📂 核心逻辑与配置 (根目录及 `/modules`)
*   **`app.py` (启动入口)**: 
    *   **职责**: 项目的“总指挥部”。
    *   **功能**: 初始化数据库表结构；创建所有必要的文件夹；挂载静态资源；注册 API 路由；定义了不需要复杂逻辑的页面跳转（如分类页）；启动 Uvicorn 服务器。
*   **`modules/database.py` (数据库驱动)**: 
    *   **职责**: 数据的“管家”。
    *   **功能**: 负责 SQLite 的 CRUD 操作。包含：随机 8 位昵称生成逻辑、密码哈希加密、初始化默认头像路径（`/static/default-avatar.png`）、管理答题记录的正误判定。
*   **`modules/routes.py` (业务路由)**: 
    *   **职责**: 业务的“核心大脑”。
    *   **功能**: 
        *   **权限分发**: 校验管理员序列号 `123456`（无提示）。
        *   **会话管理**: 处理 Cookie 存储与用户 Session。
        *   **视频逻辑**: 管理员免密上传/删除，普通用户仅能查看。
        *   **成绩生成**: 自动计算分数并在 `/Data` 生成 `账号-序号.txt`。
*   **`modules/utils.py` (工具类)**: 
    *   **功能**: 辅助进行用户名格式验证、密码强度检查以及过时 Session 的清理。

#### 2. 🎨 前端展示层 (`/templates`)
*   **`base.html` (公共骨架)**: 所有页面的母版，包含统一的导航栏、CSS 引入和基础 HTML 结构。
*   **`index.html` (欢迎页/落地页)**: 
    *   **视觉**: 温馨的粉紫色流动炫彩背景，点缀星星、爱心、花朵装饰。
    *   **作用**: 展示实验室简介，引导用户点击“开始学习”跳转登录。
*   **`login.html` (登录页)**: 
    *   **视觉**: 橙黄色调背景。
    *   **作用**: 用户与管理员共用的登录入口，管理员模式下会通过 JS 动态显示“序列号”输入框。
*   **`register.html` (注册页)**: 
    *   **作用**: 新用户创建账号，只需输入用户名和密码，系统会自动分配随机昵称。
*   **`home.html` (用户首页/仪表盘)**: 
    *   **视觉**: 清新青绿色流动背景。
    *   **作用**: 登录后的首个页面，展示用户头像、昵称，提供进入视频课室或测试系统的快捷入口。
*   **`profile.html` (个人中心)**: 
    *   **作用**: 修改个人昵称和头像；展示并提供下载历史答题记录（TXT）；管理员可见“重置所有答题机会”的红色按钮。
*   **`videos.html` (视频课室)**: 
    *   **视觉**: 舒缓的天蓝色流动背景，点缀太阳、彩虹、笑脸。
    *   **作用**: 视频播放列表。管理员视角有上传表单和删除按钮；普通用户视角仅可见播放器。
*   **`eeg_test.html` (自测题页)**: 
    *   **视觉**: 快乐的淡黄色调背景，同样有彩虹、笑脸点缀。
    *   **作用**: 核心答题系统。支持即时反馈（勾选后立即显示对错与表情图标）；管理员视角可在此增删题目。
*   **`video_catalog.html` & `test_catalog.html` (分类导航)**: 
    *   **作用**: 简单的目录索引页，用于引导用户进入特定的学习板块或测试科目。

#### 3. 🖼 静态资源层 (`/static`)
*   **`css/global.css` (视觉灵魂)**: 
    *   **作用**: 定义了所有页面的 4 种流动背景动画（`bg-welcome`, `bg-login`, `bg-home`, `bg-work`）以及装饰物（星星、彩虹、太阳）的浮动特效。
*   **`default-avatar.png` (默认资产)**: 
    *   **作用**: 每一个新用户注册后默认展示的头像文件。
*   **`uploads/`**: 存放用户自行修改后上传的个性化头像。
*   **`videos/`**: 存放所有的视频课件文件（MP4等）。

#### 4. 📊 存储与仿真 (`/Data`, `/unity`, `/webgl`)
*   **`/Data`**: 
    *   **作用**: 自动存储区。文件名形如 `testuser-1.txt`，内容包含该用户的账号、总分、时间及每题的详细对错记录。
*   **`/unity`**: 实验室虚拟仿真场景的 Unity 源代码文件夹，用于开发。
*   **`/webgl`**: Unity 导出的 Web 浏览器直接运行版，可能嵌入在某个页面供学生进行 3D 实验操作模拟。

---

**给 AI 的操作口令建议：**
> “请基于 `routes.py` 的权限逻辑和 `database.py` 的数据结构，结合 `global.css` 定义的视觉样式，对整个实验室教学平台进行代码分析或功能迭代。特别注意：管理员序列号为 `123456` 且注册时自动生成随机昵称。”